## 2023년 6월 7일 기록

취준이랑 시험도 끝나서 이제 다시 루틴을 설정해야 한다.

하고 싶은 것들을 정하고 어떻게 실행할지 계획해보자.

주중에는 19시 퇴근 후 운동하고 밥 먹으면 결국 20시부터 시간이 남는다. 결국 20시부터 취침 전까지의 시간 + 주말이 활용할 수 있는 시간의 한계.

주말의 경우 약속과 같은 비정기적인 활동이 있을 수 있다는 점, 연속적이지 않다는 점 때문에 정기적인 루틴을 짜기가 애매.

- 개발 공부
    - 자바 다시 돌리기
    - SQL 연습
    - Spring 강의 듣기
    - 파이썬 데이터 분석 배우기
    - 포켓몬 도감 사이트 & 탑스터 사이트 만들기
        - 사이트 어떻게 만들지 계획하기
    - 정보처리기사 실기
    - 개발 관련 책 읽기
- 언어 공부
    - 영어 공부
    - 일본어 공부
- 다이어트
- 돌아댕기기 (금 저녁 ~ 토, 일)
    - 돈까스, 라멘, 파스타, 베이커리 등 음식 투어
    - 맘에 드는 전시 보기
    - 의류, 잡화 쇼핑
    - 콘서트
- 글쓰기
    - 일기 쓰기
    - 개발 관련 글쓰기
    - 취미 관련 글쓰기
    - 게임 스토리 구상 및 작성 
- 취미
    - 독서
    - 영상매체
    - 게임
    - 음악
    - 축구
    - 아이돌
    - 요리
    - AI로 그림, 음악 만들기
    - 투자

1. 개발 공부는 정기적인 활동으로 설정하는 게 좋기 때문에 주중 시간을 활용하는 방향으로 가야함. 퇴근 후 매일 혹은 격일로 1-2시간을 할당.

    가장 큰 문제는 포켓몬 도감 사이트 & 탑스터 만드는 건데 이게 시간을 많이 잡아먹어서 언제 해야할지 모르겠음.

2. 영어, 일본어 같은 외국어 공부도 꾸준히 하는 게 좋긴 하지만 일단 보류. 공부해야 하는 목적에 따라 하나만 하자. 사실 일본어는 그냥 회화만 하면 됨.

3. 다이어트는 매일 퇴근 후 운동을 한다는 가정 + 주중에 저녁 식사를 우유랑 토마토, 닭가슴살로 한다는 가정 하에 1-2달이면 가능. 이건 시간을 많이 소요하지 않음.

4. 돌아댕기기는 금요일 저녁, 주말을 활용하는 게 편리. 약속이 잡혔을 때 같이 할 수 있다는 점에서 활용도가 높음.

5. 글쓰기는 일기 쓰기 (매일이 아니더라도), 개발 관련 글쓰기, 취미 관련 글쓰기, 게임 스토리 구상 등을 의미하는데 의외로 시간을 많이 잡아먹지만 경험을 글로 정의할 수 있다는 점에서 효용성이 높다.

6. 취미가 가장 많은 시간을 할당할 수 있는 영역이면서 놓칠 수 없기 때문에 시간 배분이 무엇보다 중요함. 

    출퇴근 시간이 40-50분 가량 되기 때문에 음악 앨범 하나 듣기 좋음. 신경 쓰이는 앨범이 있으면 출퇴근 시간 + 게임할 때 듣자.

    영상매체는 평균적으로 1시간 - 2시간 30분 정도. 퇴근하고 즐기기 딱. 주말에 몰아보기 딱. 브레이킹 베드 ㄱ.

    독서는 꾸준히 봐야하는디 언제 봐야할지 몰겠음. 지금도 존 업다이크랑 들뢰즈 아저씨 책 읽어야 하는데 허미.

    게임은 가장 시간을 많이 잡아먹으면서 냉정하게 봤을 때 직장생활에 가장 큰 걸림돌 중 하나임. 근데 게임 안하면 입에 가시가 돋기 때문에 일단 해야함. 현재 대역전재판 2 플레이 중.

    축구는 시즌이 되면 라이브 경기를 보고, 전술 포인트 같은 거 생각해야해서 은근 시간 잡아먹음.

    아이돌은 유튜브 컨텐츠 시청이랑 스밍 정도 말고는 크게 시간을 먹진 않음. 

    요리는 주말 활용. 먹고 싶은 요리가 있으면 하면 됨. 어차피 자주 하지 않음.

    AI 활용은 새로 배워야해서 잘 모르겠음. 
    
    투자는 해봐야 주식이나 코인인데 정보 얻는 시간이랑 거래소에 있는 시간. 근데 일단 시드부터 모으자.

### 오전

월요일에 했던 SQL문 리뷰 및 회사 생활 루틴에 대해서 생각하기.

- with절은 테이블 사용이 많거나 결과를 많이 써야할 때 사용하기.
- 개수를 계산할 때는 count도 좋지만 sum을 활용하면 더 명시하기 좋다.
- order by에 decode나 case when 써서 함수 써보기

### 오후

- 6번 쿼리문제 매년 1월일 때 주차(week)가 순서대로 잘 나오게 하기

<hr>

#### 쿼리 8번문제
특정사번(:EMPLOYEE_ID)에 대한 메뉴 권한 정보를 출력하세요

대상테이블

    A11.A1AT_USER_MASTER  <- 사람 정보 (사번, 부서번호)
    
    A11.A1DT_ROLE_DEPT <- 부서권한 정보
    
    A11.A1DT_ROLE_USER <- 개인 권한 정보
    
    A11.A1DT_ROLE      <- 역할정보
    
    A11.A1DT_ROLE_MENU_PERMISSION  <- 역할의 메뉴(버튼) 정보
    
제약조건

    CATEGORY_ID = 'E000000'
    
출력대상

    부서명, 부서코드, 사번, 사원명, 역할명, 메뉴ID, 추가 권한, 삭제 권한, 저장 권한, 조회 권한, 선택 권한, 엑셀 권한, 출력 권한, 닫기 권한, 표시여부

#### 해결법

1. 해당자의 employee_id에 해당하는 role_id들
2. 해당자의 depart_dpt_cd에 해당하는 role_id들
3. UNION을 사용하여 1번과 2번을 합친다 (그 사람이 갖고 있는 개인 role과 부서 role의 role_id를 중복 없이 합친거임)
4. 합쳐진 role_id가 R_M_P와 ROLE의 role_id와 일치하면 됨.

```oracle
select
    ROLES.deprt_nm_kor as "부서명",
    ROLES.depart_dpt_cd as "부서코드",
    ROLES.employee_id as "사번",
    ROLES.nm_kor as "사원명",
    R.name as "역할명",
    R_M_P.menu_id as "메뉴 ID",
    max(R_M_P.add_permission) as "추가 권한",
    max(R_M_P.del_permission) as "삭제 권한",
    max(R_M_P.write_permission) as "저장 권한",
    max(R_M_P.read_permission) as "조회 권한",
    max(R_M_P.select_permission) as "선택 권한",
    max(R_M_P.excel_permission) as "엑셀 권한",
    max(R_M_P.print_permission) as "출력 권한",
    max(R_M_P.exit_permission) as "닫기 권한",
    R_M_P.display as "표시여부"
from 
    A11.A1DT_ROLE_MENU_PERMISSION R_M_P, 
    A11.A1DT_ROLE R,
    (select -- employee_id에 해당하는 role_id들
        R_U.role_id,
        U_M.deprt_nm_kor,
        U_M.depart_dpt_cd,
        U_M.employee_id,
        U_M.nm_kor
    from 
        A11.A1AT_USER_MASTER U_M,
        A11.A1DT_ROLE_USER R_U
    where
        U_M.employee_id = :EMPLOYEE_ID and
        U_M.employee_id = R_U.employee_id
        
    UNION
            
    select -- depart_dpt_cd에 해당하는 role_id들
        R_D.role_id,
        U_M.deprt_nm_kor,
        U_M.depart_dpt_cd,
        U_M.employee_id,
        U_M.nm_kor
    from 
        A11.A1AT_USER_MASTER U_M,
        A11.A1DT_ROLE_DEPT R_D
    where
        U_M.employee_id = :EMPLOYEE_ID and
        U_M.depart_dpt_cd = R_D.dept_cd
        
    ) ROLES

where
    R.category_id = 'E000000' and
    R_M_P.role_id = ROLES.role_id and -- ROLES의 role_id가 R_M_P와 R의 role_id와 같아야 함
    R.role_id = ROLES.role_id
group by
    ROLES.deprt_nm_kor,
    ROLES.depart_dpt_cd,
    ROLES.employee_id,
    ROLES.nm_kor,
    R.name,
    R_M_P.menu_id,
    R_M_P.display
```

- alias 할 때 주의하기 (한눈에 알아보기 쉽게)


- 참고
    - https://devmoony.tistory.com/112 (오라클 UNION 사용법)


